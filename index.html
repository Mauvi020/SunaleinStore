<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Sunalein Store</title>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD9mfFsqwuZFX0lYHUrE3SZ7YW4YPFJMSs",
    authDomain: "sunalein-store.firebaseapp.com",
    databaseURL: "https://sunalein-store-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "sunalein-store",
    storageBucket: "sunalein-store.appspot.com",
    messagingSenderId: "919907710842",
    appId: "1:919907710842:web:c5669a0e0380c4718648c3",
    measurementId: "G-XSMVJH11W7"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const itemsRef = ref(db, "items");

  const container = document.createElement("div");
  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById("itemsContainer");
  });

  function render(items, filter="") {
    const container = document.getElementById("itemsContainer");
    container.innerHTML = "";
    for (let key in items) {
      const item = items[key];
      if (filter && !item.name.toLowerCase().includes(filter.toLowerCase()) && !item.cat.toLowerCase().includes(filter.toLowerCase())) continue;
      const div = document.createElement("div");
      div.className = "item";
      div.innerHTML = `
        <h3>${item.name}</h3>
        <p>Preis: ${item.price !== null ? item.price.toFixed(2) + "â‚¬" : "Preis auf Anfrage"}</p>
        <p>Kategorie: ${item.cat}</p>
      `;
      container.appendChild(div);
    }
  }

  onValue(itemsRef, (snapshot) => {
    const data = snapshot.val();
    render(data || {});
  });

  window.searchItems = function() {
    const filter = document.getElementById("searchInput").value;
    onValue(itemsRef, (snapshot) => {
      render(snapshot.val() || {}, filter);
    });
  }

</script>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f5f5f5; }
  header { background:#4B0082; color:white; padding:20px; text-align:center; }
  h1 { margin:0; }
  #searchContainer { padding:10px; text-align:center; }
  #searchInput { padding:5px; width:250px; }
  #itemsContainer { display:flex; flex-wrap:wrap; gap:15px; justify-content:center; padding:20px; }
  .item { background:white; padding:15px; border-radius:10px; width:200px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
  footer { text-align:center; padding:15px; background:#222; color:white; position:fixed; width:100%; bottom:0; }
  a { color:#FFD700; text-decoration:none; }
  a:hover { text-decoration:underline; }
</style>
</head>
<body>
<header>
  <h1>Sunalein Store</h1>
</header>

<div id="searchContainer">
  <input type="text" id="searchInput" placeholder="Suche nach Item oder Kategorie">
  <button onclick="searchItems()">Suchen</button>
  <p><a href="admin.html">Admin Panel</a></p>
</div>

<div id="itemsContainer"></div>

<footer>
  Sunalein Store &copy; 2026 | <a href="https://discord.gg/V9pPWjVSF8" target="_blank">Discord Server</a>
</footer>
</body>
</html>
