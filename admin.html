<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Sunalein Admin Panel</title>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getDatabase, ref, onValue, push, update, remove } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyD9mfFsqwuZFX0lYHUrE3SZ7YW4YPFJMSs",
    authDomain: "sunalein-store.firebaseapp.com",
    databaseURL: "https://sunalein-store-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "sunalein-store",
    storageBucket: "sunalein-store.appspot.com",
    messagingSenderId: "919907710842",
    appId: "1:919907710842:web:c5669a0e0380c4718648c3",
    measurementId: "G-XSMVJH11W7"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const itemsRef = ref(db, "items");

  let loggedIn = false;

  function login() {
    const user = prompt("Benutzername:");
    const pass = prompt("Passwort:");
    if(user.toLowerCase() === "sunalein" && pass === "Labyrinth876/12") {
      loggedIn = true;
      document.getElementById("adminPanel").style.display = "block";
      loadItems();
    } else alert("Falscher Benutzername oder Passwort!");
  }

  function loadItems() {
    onValue(itemsRef, (snapshot) => {
      const data = snapshot.val() || {};
      const container = document.getElementById("itemsList");
      container.innerHTML = "";
      for(let key in data) {
        const item = data[key];
        const div = document.createElement("div");
        div.className = "adminItem";
        div.innerHTML = `
          <strong>${item.name}</strong> - ${item.price !== null ? item.price.toFixed(2)+"€" : "Preis auf Anfrage"} - ${item.cat}
          <button onclick="editItem('${key}')">Bearbeiten</button>
          <button onclick="deleteItem('${key}')">Löschen</button>
        `;
        container.appendChild(div);
      }
    });
  }

  window.editItem = function(key) {
    const name = prompt("Neuer Name:");
    const price = prompt("Neuer Preis (leer = Preis auf Anfrage):");
    const cat = prompt("Neue Kategorie:");
    update(ref(db, "items/" + key), {
      name: name,
      price: price === "" ? null : parseFloat(price),
      cat: cat
    });
  }

  window.deleteItem = function(key) {
    if(confirm("Item wirklich löschen?")) remove(ref(db, "items/" + key));
  }

  window.addItem = function() {
    const name = prompt("Name des Items:");
    const price = prompt("Preis (leer = Preis auf Anfrage):");
    const cat = prompt("Kategorie:");
    push(itemsRef, {
      name: name,
      price: price === "" ? null : parseFloat(price),
      cat: cat,
      img: ""
    });
  }

  window.onload = login;
</script>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f0f0f0; }
  header { background:#4B0082; color:white; padding:20px; text-align:center; }
  h1 { margin:0; }
  #adminPanel { display:none; padding:20px; }
  .adminItem { margin-bottom:10px; padding:10px; background:white; border-radius:8px; box-shadow:0 0 5px rgba(0,0,0,0.1); }
  button { margin-left:5px; padding:3px 6px; }
  footer { text-align:center; padding:15px; background:#222; color:white; position:fixed; width:100%; bottom:0; }
  a { color:#FFD700; text-decoration:none; }
  a:hover { text-decoration:underline; }
</style>
</head>
<body>
<header>
  <h1>Admin Panel - Sunalein Store</h1>
</header>

<div id="adminPanel">
  <button onclick="addItem()">Neues Item hinzufügen</button>
  <div id="itemsList"></div>
</div>

<footer>
  Sunalein Store &copy; 2026 | <a href="https://discord.gg/V9pPWjVSF8" target="_blank">Discord Server</a>
</footer>
</body>
</html>
